import{_ as z}from"./index.a220569c.js";import{r as f,w as g,az as W,o as F,f as x,g as I,h as l,F as V,s as O,ax as j,A as D,B as q,C as G}from"./vendor.e1dacb25.js";const h=u=>(q("data-v-71f0c612"),u=u(),G(),u),J=["src"],K=["onClick"],Q=["src"],U=h(()=>l("i",{class:"ri-anticlockwise-line"},null,-1)),Z=[U],ee=h(()=>l("i",{class:"ri-arrow-left-s-line"},null,-1)),te=[ee],se=h(()=>l("i",{class:"ri-aspect-ratio-line"},null,-1)),le=[se],ie=h(()=>l("i",{class:"ri-arrow-right-s-line"},null,-1)),ne=[ie],ae=h(()=>l("i",{class:"ri-clockwise-line"},null,-1)),oe=[ae],re=h(()=>l("i",{class:"ri-close-line"},null,-1)),ce=[re],ue={props:{value:{type:Boolean,default:!1},isThumb:{type:Boolean,default:!1},list:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0}},emits:["update:value"],setup(u,{emit:E}){const i=u,r=f(!1);r.value=i.value;const n=f(0);n.value=i.initialIndex;let m=0,y=0,p={x:0,y:0},s={x:1,y:1},v=0,P=0,b=0;const d={x:0,y:0};let k=!1;g(()=>i.value,()=>{r.value=i.value,r.value&&W(()=>{$()})}),g(r,()=>{E("update:value",r.value)}),g(()=>i.initialIndex,()=>{n.value=i.initialIndex}),g(n,()=>{i.isThumb&&W(()=>{const e=B.value;e&&(e.scrollLeft=(n.value-1)*100)})});function w(e){const t=[parseInt(e.style.left+0),parseInt(e.style.top+0)];return{x:t[0],y:t[1]}}function _(e,t="fit"){const a=new Image;a.src=i.list[n.value],a.complete?T(a,e,t):a.onload=()=>{T(a,e,t)}}function T(e,t,a){const c=e.naturalWidth,H=e.naturalHeight,Y=c/H;a==="fit"?(m=Math.ceil(b*Y/2),y=Math.ceil(b/2)):a==="original"&&(m=c,y=H),t.style.width=m+"px",t.style.height=y+"px",t.style.left=Math.ceil((P-m)/2)+"px",t.style.top=Math.ceil((b-y)/2)+"px",s={x:1,y:1},v=0,t.style.transform="scale(1) rotate(0deg)"}function $(){if(i.list.length>0){const e=o.value;if(e){if(P=e.parentNode.offsetWidth,b=e.parentNode.offsetHeight,_(e),i.isThumb){const t=L.value;t.style.width=i.list.length*100+"px"}e.addEventListener("mousedown",t=>{t.preventDefault(),p=w(e),d.x=t.clientX,d.y=t.clientY,k=!0}),e.addEventListener("mousemove",t=>{if(t.preventDefault(),k){document.body.style.cursor="move";const a=p.x+t.clientX-d.x,c=p.y+t.clientY-d.y;e.style.transition="none",e.style.left=a+"px",e.style.top=c+"px",d.x=t.clientX,d.y=t.clientY,p=w(e)}}),e.addEventListener("mouseup",t=>{t.preventDefault(),document.body.style.cursor="default",k=!1,e.style.transition="all .3s"}),C.value.addEventListener("wheel",t=>{(t.wheelDelta>0||t.detail>0)&&s.x<1.9&&(s.x+=.1,s.y+=.1),(t.wheelDelta<0||t.detail<0)&&s.x>.4&&(s.x-=.1,s.y-=.1),e.style.transform=`scale(${s.x},${s.y}) rotate(${v}deg)`,p=w(e)})}}else r.value=!1}function M(e){const t=o.value;t.style.transition="none",n.value=e,s={x:1,y:1},v=0,o.value.style.transform="scale(1) rotate(0deg)",setTimeout(()=>{t.style.transition="all .3s"},30)}function R(){n.value>0?n.value--:n.value=i.list.length-1;const e=o.value;e.style.transition="none",_(e),setTimeout(()=>{e.style.transition="all .3s"},30)}function N(){n.value<i.list.length-1?n.value++:n.value=0;const e=o.value;e.style.transition="none",_(e),setTimeout(()=>{e.style.transition="all .3s"},30)}function S(){const e=o.value;_(e,"original"),e.style.transform=`scale(${s.x},${s.y}) rotate(${v}deg)`}function A(){const e=o.value;e.style.transform=`scale(${s.x},${s.y}) rotate(${v-=90}deg)`}function X(){const e=o.value;e.style.transform=`scale(${s.x},${s.y}) rotate(${v+=90}deg)`}F(()=>{$()});const C=f(),o=f(),B=f(),L=f();return(e,t)=>r.value?(x(),I("div",{key:0,ref_key:"HbPrevWrap",ref:C,class:"hb-prev-wrap"},[l("img",{ref_key:"HbPrevImg",ref:o,class:"hb-prev-img",alt:"\u9884\u89C8\u56FE",src:u.list[n.value]},null,8,J),i.isThumb?(x(),I("div",{key:0,ref_key:"HbPrevThumbBox",ref:B,class:"hb-prev-thumb-box"},[l("div",{ref_key:"HbPrevThumb",ref:L,class:"hb-prev-thumb-list"},[(x(!0),I(V,null,O(i.list,(a,c)=>(x(),I("div",{key:c,class:j(["hb-prev-thumb-item",n.value===c?"hb-prev-thumb-item-active":""]),onClick:H=>M(c)},[l("img",{class:"hb-prev-thumb-img",src:a},null,8,Q)],10,K))),128))],512)],512)):D("v-if",!0),l("div",{class:"hb-prev-bar"},[l("div",{class:"hb-prev-btn",title:"\u5411\u5DE6\u65CB\u8F6C",onClick:A},Z),l("div",{class:"hb-prev-btn",title:"\u524D\u4E00\u5F20",onClick:R},te),l("div",{class:"hb-prev-btn",title:"\u56FE\u7247\u539F\u59CB\u5927\u5C0F",onClick:S},le),l("div",{class:"hb-prev-btn",title:"\u540E\u4E00\u5F20",onClick:N},ne),l("div",{class:"hb-prev-btn",title:"\u5411\u53F3\u65CB\u8F6C",onClick:X},oe)]),l("div",{class:"hb-prev-close",onClick:t[0]||(t[0]=a=>r.value=!1)},ce)],512)):D("v-if",!0)}};var fe=z(ue,[["__scopeId","data-v-71f0c612"]]);export{fe as H};
