import{_ as W}from"./index.a04f89fd.js";import{e as Y,a6 as q,r as U,f as p,g as H,h as _,i as l,k as a,l as t,ah as J,ai as x,am as T,m as z,an as R,v as C,ab as A,N as B,b3 as F,F as O,Y as E,A as j,b4 as k,ap as $,z as M,x as i,B as K,C as Q,$ as G,t as D}from"./vendor.9a5280d9.js";import{C as P}from"./CloudUploadOutline.72976b77.js";function ee(d,n,f,e=0,h=0,m="",r="",N="",b=""){if(!n||!f)d({success:!1,data:"\u5E95\u56FE\u6216\u6C34\u5370\u4E0D\u80FD\u4E3A\u7A7A\uFF01"});else{const v={w:0,h:0},y={w:0,h:0};v.w=m||n.width,v.h=r||n.height,y.w=N||f.width,y.h=b||f.height;const w=document.createElement("canvas");w.width=v.w,w.height=v.h;const L=w.getContext("2d");L.drawImage(n,0,0,v.w,v.h),L.drawImage(f,e,h,y.w,y.h),d({success:!0,data:w.toDataURL("image/png",1)})}}function te(d,n,f=0,e=0,h=0,m=0,r=0,N=0){if(!n)d({success:!1,data:"\u5E95\u56FE\u4E0D\u80FD\u4E3A\u7A7A\uFF01"});else{const b={w:0,h:0};b.w=r||n.width,b.h=N||n.height;const v={w:0,h:0};if(f+e>=b.w){d({success:!1,data:"\u5DE6\u53F3\u8DDD\u79BB\u53C2\u6570\u9519\u8BEF\uFF01"});return}else if(h+m>=b.h){d({success:!1,data:"\u9876\u5E95\u8DDD\u79BB\u53C2\u6570\u9519\u8BEF\uFF01"});return}else v.w=b.w-f-e,v.h=b.h-h-m;const y=document.createElement("canvas");y.width=b.w,y.height=b.h;const w=y.getContext("2d");w.drawImage(n,0,0,b.w,b.h);const L=w.getImageData(f,h,v.w,v.h);y.width=v.w,y.height=v.h,w.putImageData(L,0,0),d({success:!0,data:y.toDataURL("image/png",1)})}}function le(d,n,f=0,e=0){if(!n)d({success:!1,data:"\u5E95\u56FE\u4E0D\u80FD\u4E3A\u7A7A\uFF01"});else{const h={w:0,h:0};h.w=f||n.width,h.h=e||n.height;const m=document.createElement("canvas");m.width=h.w,m.height=h.h,m.getContext("2d").drawImage(n,0,0,h.w,h.h),d({success:!0,data:m.toDataURL("image/png",1)})}}const V=d=>(K("data-v-6de66a8c"),d=d(),Q(),d),ae={class:"hb-image-factory-wrap"},ie={class:"hb-image-factory-config"},se=i(" \u6C34\u5370\u6DFB\u52A0 "),oe=i("\u4E0A\u4F20"),ne=i("\u94FE\u63A5"),ue=i("\u786E\u5B9A"),de=i(" \u4E0A\u4F20\u56FE\u7247 "),re=i("\u5BBD\u5EA6"),ge=i("px"),he=V(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),ce=i("\u9AD8\u5EA6"),fe=i("px"),pe=i("\u4E0A\u4F20"),_e=i("\u94FE\u63A5"),me=i("\u786E\u5B9A"),ve=i(" \u4E0A\u4F20\u56FE\u7247 "),ye=i("\u5BBD\u5EA6"),we=i("px"),be=V(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),ke=i("\u9AD8\u5EA6"),xe=i("px"),Ie=i("\u5DE6\u4E0A\u89D2"),Re=i("\u5DE6\u4E0B\u89D2"),je=i("\u53F3\u4E0A\u89D2"),Ce=i("\u53F3\u4E0B\u89D2"),Ue=i("\u5C45\u4E2D"),Le=i("\u81EA\u5B9A\u4E49"),$e=i("\u8DDD\u5DE6"),Be=i("px"),He=V(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),Ne=i("\u8DDD\u9876"),Se=i("px"),Fe=i("\u56FE\u7247\u751F\u6210"),ze={class:"hb-image-factory-preview"},De=i(" \u751F\u6210\u7ED3\u679C "),Te={setup(d){const n=Y(),f="image/jpg,image/jpeg,image/png",e=q({image:{type:"upload",url:"",file:null,object:null,width:0,height:0},sign:{type:"upload",url:"",file:null,object:null,width:0,height:0,position:"leftTop",top:0,left:0}}),h=U(null),m=U(),r=U();function N(){setTimeout(()=>{m.value.click()},400)}function b(u){const o=u.target.files[0];if(!f.toLocaleLowerCase().includes(o.type.toLocaleLowerCase())){n.error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u652F\u6301");return}e.image.file=URL.createObjectURL(o),r.value.style.display="block",r.value.src=e.image.file;let s=new Image;s.src=e.image.file,s.onload=()=>{e.image.width=s.width,e.image.height=s.height},e.image.object=s,m.value.value=""}function v(){r.value.style.display="block",r.value.src=e.image.url;let u=new Image;u.src=e.image.url,u.crossOrigin="Anonymous",u.onload=()=>{e.image.width=u.width,e.image.height=u.height,e.image.object=u}}const y=U(),w=U();function L(){setTimeout(()=>{y.value.click()},400)}function I(u){const o=u.target.files[0];if(!f.toLocaleLowerCase().includes(o.type.toLocaleLowerCase())){n.error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u652F\u6301");return}e.sign.file=URL.createObjectURL(o),w.value.style.display="block",w.value.src=e.sign.file;let s=new Image;s.src=e.sign.file,s.onload=()=>{e.sign.width=s.width,e.sign.height=s.height},e.sign.object=s,y.value.value=""}function c(){w.value.style.display="block",w.value.src=e.sign.url;let u=new Image;u.src=e.sign.url,u.crossOrigin="Anonymous",u.onload=()=>{e.sign.width=u.width,e.sign.height=u.height,e.sign.object=u}}function g(){if(r.value.src===""){n.error("\u8BF7\u5148\u4E0A\u4F20\u6216\u6DFB\u52A0\u4E00\u4E2A\u5E95\u56FE\u56FE\u7247\uFF01");return}if(w.value.src===""){n.error("\u8BF7\u5148\u4E0A\u4F20\u6216\u6DFB\u52A0\u4E00\u4E2A\u6C34\u5370\u56FE\u7247\uFF01");return}e.sign.position==="leftTop"?(e.sign.left=0,e.sign.top=0):e.sign.position==="leftBottom"?(e.sign.left=0,e.sign.top=e.image.height-e.sign.height):e.sign.position==="rightTop"?(e.sign.left=e.image.width-e.sign.width,e.sign.top=0):e.sign.position==="rightBottom"?(e.sign.left=e.image.width-e.sign.width,e.sign.top=e.image.height-e.sign.height):e.sign.position==="center"&&(e.sign.left=(e.image.width-e.sign.width)/2,e.sign.top=(e.image.height-e.sign.height)/2),ee(u=>{u.success?h.value.src=u.data:(h.value.src="",n.error(u.data))},e.image.object,e.sign.object,e.sign.left,e.sign.top,e.image.width,e.image.height,e.sign.width,e.sign.height)}return(u,o)=>(p(),H("div",ae,[_("div",ie,[l(t(M),{style:{height:"100%",overflow:"auto"}},{header:a(()=>[se]),default:a(()=>[l(t(J),null,{default:a(()=>[l(t(x),{label:"\u5E95\u56FE\u56FE\u7247"},{default:a(()=>[l(t(T),{value:t(e).image.type,"onUpdate:value":o[0]||(o[0]=s=>t(e).image.type=s)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"upload"},{default:a(()=>[oe]),_:1}),l(t(R),{value:"link"},{default:a(()=>[ne]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l(t(x),{label:"\u5E95\u56FE\u9884\u89C8"},{default:a(()=>[_("img",{ref_key:"HbImage",ref:r,class:"hb-preview-img"},null,512)]),_:1}),l(t(x),{label:""},{default:a(()=>[t(e).image.type==="link"?(p(),C(t(F),{key:0},{default:a(()=>[l(t(A),{value:t(e).image.url,"onUpdate:value":o[1]||(o[1]=s=>t(e).image.url=s)},null,8,["value"]),l(t(B),{type:"primary",onClick:v},{default:a(()=>[ue]),_:1})]),_:1})):(p(),H(O,{key:1},[_("input",{ref_key:"HbImageFile",ref:m,type:"file",style:{display:"none"},accept:f,onChange:b},null,544),t(e).image.type==="upload"?(p(),C(t(B),{key:0,type:"primary",onClick:N},{default:a(()=>[l(t(E),{component:t(P),size:"22"},null,8,["component"]),de]),_:1})):j("v-if",!0)],64))]),_:1}),l(t(x),{label:"\u5E95\u56FE\u56FE\u7247\u5BBD\u9AD8"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[re]),_:1}),l(t($),{"show-button":!1,value:t(e).image.width,"onUpdate:value":o[2]||(o[2]=s=>t(e).image.width=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[ge]),_:1}),he,l(t(k),null,{default:a(()=>[ce]),_:1}),l(t($),{"show-button":!1,value:t(e).image.height,"onUpdate:value":o[3]||(o[3]=s=>t(e).image.height=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[fe]),_:1})]),_:1})]),_:1}),l(t(x),{label:"\u6C34\u5370\u56FE\u7247"},{default:a(()=>[l(t(T),{value:t(e).sign.type,"onUpdate:value":o[4]||(o[4]=s=>t(e).sign.type=s)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"upload"},{default:a(()=>[pe]),_:1}),l(t(R),{value:"link"},{default:a(()=>[_e]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l(t(x),{label:"\u6C34\u5370\u9884\u89C8"},{default:a(()=>[_("img",{ref_key:"HbSign",ref:w,class:"hb-preview-img"},null,512)]),_:1}),l(t(x),{label:""},{default:a(()=>[t(e).sign.type==="link"?(p(),C(t(F),{key:0},{default:a(()=>[l(t(A),{value:t(e).sign.url,"onUpdate:value":o[5]||(o[5]=s=>t(e).sign.url=s)},null,8,["value"]),l(t(B),{type:"primary",onClick:c},{default:a(()=>[me]),_:1})]),_:1})):j("v-if",!0),t(e).sign.type==="upload"?(p(),H(O,{key:1},[_("input",{ref_key:"HbSignFile",ref:y,type:"file",style:{display:"none"},accept:f,onChange:I},null,544),t(e).sign.type==="upload"?(p(),C(t(B),{key:0,type:"primary",onClick:L},{default:a(()=>[l(t(E),{component:t(P),size:"22"},null,8,["component"]),ve]),_:1})):j("v-if",!0)],64)):j("v-if",!0)]),_:1}),l(t(x),{label:"\u6C34\u5370\u56FE\u7247\u5BBD\u9AD8"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[ye]),_:1}),l(t($),{"show-button":!1,value:t(e).sign.width,"onUpdate:value":o[6]||(o[6]=s=>t(e).sign.width=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[we]),_:1}),be,l(t(k),null,{default:a(()=>[ke]),_:1}),l(t($),{"show-button":!1,value:t(e).sign.height,"onUpdate:value":o[7]||(o[7]=s=>t(e).sign.height=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[xe]),_:1})]),_:1})]),_:1}),l(t(x),{label:"\u6C34\u5370\u4F4D\u7F6E"},{default:a(()=>[l(t(T),{value:t(e).sign.position,"onUpdate:value":o[8]||(o[8]=s=>t(e).sign.position=s)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"leftTop"},{default:a(()=>[Ie]),_:1}),l(t(R),{value:"leftBottom"},{default:a(()=>[Re]),_:1}),l(t(R),{value:"rightTop"},{default:a(()=>[je]),_:1}),l(t(R),{value:"rightBottom"},{default:a(()=>[Ce]),_:1}),l(t(R),{value:"center"},{default:a(()=>[Ue]),_:1}),l(t(R),{value:"free"},{default:a(()=>[Le]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(e).sign.position==="free"?(p(),C(t(x),{key:0,label:"\u6C34\u5370\u4F4D\u7F6E\u53C2\u6570"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[$e]),_:1}),l(t($),{"show-button":!1,value:t(e).sign.left,"onUpdate:value":o[9]||(o[9]=s=>t(e).sign.left=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[Be]),_:1}),He,l(t(k),null,{default:a(()=>[Ne]),_:1}),l(t($),{"show-button":!1,value:t(e).sign.top,"onUpdate:value":o[10]||(o[10]=s=>t(e).sign.top=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[Se]),_:1})]),_:1})]),_:1})):j("v-if",!0),l(t(z),{justify:"center"},{default:a(()=>[l(t(B),{type:"primary",onClick:g},{default:a(()=>[Fe]),_:1})]),_:1})]),_:1})]),_:1})]),_("div",ze,[l(t(M),{style:{height:"100%"}},{header:a(()=>[De]),default:a(()=>[_("img",{ref_key:"HbImagePreview",ref:h,class:"hb-factory-image-preview"},null,512)]),_:1})])]))}};var Oe=W(Te,[["__scopeId","data-v-6de66a8c"]]);const Me=d=>(K("data-v-f0df3eda"),d=d(),Q(),d),Ae={class:"hb-image-factory-wrap"},Ee={class:"hb-image-factory-config"},Pe=i(" \u56FE\u7247\u88C1\u526A "),Ve=i("\u4E0A\u4F20"),Ge=i("\u94FE\u63A5"),We=i("\u786E\u5B9A"),Ye=i(" \u4E0A\u4F20\u56FE\u7247 "),qe=i("\u5BBD\u5EA6"),Je=i("px"),Ke=Me(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),Qe=i("\u9AD8\u5EA6"),Xe=i("px"),Ze=i("\u56FE\u7247\u751F\u6210"),et={class:"hb-image-factory-preview"},tt=i(" \u5E95\u56FE\u9884\u89C8 | \u8F93\u51FA\u7ED3\u679C "),lt={class:"hb-factory-image-contrast-preview"},at={class:"hb-factory-image-preview-content"},it={key:0},st={class:"hb-factory-image-preview-content"},ot={key:0},nt={setup(d){const n=Y(),f="image/jpg,image/jpeg,image/png",e=q({type:"upload",url:"",file:null,object:null,width:0,height:0,leftRight:[0,0],topBottom:[0,0],isReady:!1,resultReady:!1,resultDes:[0,0]}),h=U(null),m=U(),r=U();function N(){setTimeout(()=>{m.value.click()},400)}function b(I){const c=I.target.files[0];if(!f.toLocaleLowerCase().includes(c.type.toLocaleLowerCase())){n.error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u652F\u6301");return}e.file=URL.createObjectURL(c),r.value.style.display="block",r.value.src=e.file;let g=new Image;g.src=e.file,g.onload=()=>{e.width=g.width,e.height=g.height},e.object=g,e.isReady=!0,m.value.value=""}function v(){r.value.style.display="block",r.value.src=e.url;let I=new Image;I.src=e.image.url,I.crossOrigin="Anonymous",I.onload=()=>{e.width=I.width,e.height=I.height,e.object=I,e.isReady=!0}}const y=U({}),w=U({});function L(){if(r.value.src===""){n.error("\u8BF7\u5148\u4E0A\u4F20\u6216\u6DFB\u52A0\u4E00\u4E2A\u5E95\u56FE\u56FE\u7247\uFF01");return}r.value.style.width=e.width+"px",r.value.style.height=e.height+"px",le(S=>{S.success?r.value.src=S.data:n.error(S.data)},e.object,e.width,e.height);let I=e.leftRight[0]<e.leftRight[1]?e.leftRight[0]:e.leftRight[1],c=e.leftRight[0]<e.leftRight[1]?e.leftRight[1]:e.leftRight[0];const g=I,u=e.width-c;let o=e.topBottom[0]<e.topBottom[1]?e.topBottom[0]:e.topBottom[1],s=e.topBottom[0]<e.topBottom[1]?e.topBottom[1]:e.topBottom[0];const X=o,Z=e.height-s;te(S=>{S.success?(h.value.src=S.data,e.resultReady=!0,e.resultDes=[c-I,s-o]):(e.resultReady=!1,h.value.src="",n.error(S.data))},e.object,g,u,X,Z,e.width,e.height)}return(I,c)=>(p(),H("div",Ae,[_("div",Ee,[l(t(M),{style:{height:"100%",overflow:"auto"}},{header:a(()=>[Pe]),default:a(()=>[l(t(J),null,{default:a(()=>[l(t(x),{label:"\u5E95\u56FE\u56FE\u7247"},{default:a(()=>[l(t(T),{value:t(e).type,"onUpdate:value":c[0]||(c[0]=g=>t(e).type=g)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"upload"},{default:a(()=>[Ve]),_:1}),l(t(R),{value:"link"},{default:a(()=>[Ge]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l(t(x),{label:""},{default:a(()=>[t(e).type==="link"?(p(),C(t(F),{key:0},{default:a(()=>[l(t(A),{value:t(e).url,"onUpdate:value":c[1]||(c[1]=g=>t(e).url=g)},null,8,["value"]),l(t(B),{type:"primary",onClick:v},{default:a(()=>[We]),_:1})]),_:1})):(p(),H(O,{key:1},[_("input",{ref_key:"HbImageFile",ref:m,type:"file",style:{display:"none"},accept:f,onChange:b},null,544),t(e).type==="upload"?(p(),C(t(B),{key:0,type:"primary",onClick:N},{default:a(()=>[l(t(E),{component:t(P),size:"22"},null,8,["component"]),Ye]),_:1})):j("v-if",!0)],64))]),_:1}),l(t(x),{label:"\u5E95\u56FE\u56FE\u7247\u5BBD\u9AD8"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[qe]),_:1}),l(t($),{"show-button":!1,value:t(e).width,"onUpdate:value":c[2]||(c[2]=g=>t(e).width=g)},null,8,["value"]),l(t(k),null,{default:a(()=>[Je]),_:1}),Ke,l(t(k),null,{default:a(()=>[Qe]),_:1}),l(t($),{"show-button":!1,value:t(e).height,"onUpdate:value":c[3]||(c[3]=g=>t(e).height=g)},null,8,["value"]),l(t(k),null,{default:a(()=>[Xe]),_:1})]),_:1})]),_:1}),t(e).width>0?(p(),C(t(x),{key:0,label:"\u5DE6\u53F3\u88C1\u526A\u8DDD\u79BB"},{default:a(()=>[l(t(G),{value:t(e).leftRight,"onUpdate:value":c[4]||(c[4]=g=>t(e).leftRight=g),range:"",placement:"bottom",min:0,max:t(e).width,marks:y.value,step:1},null,8,["value","max","marks"])]),_:1})):j("v-if",!0),t(e).height>0?(p(),C(t(x),{key:1,label:"\u9876\u5E95\u88C1\u526A\u8DDD\u79BB"},{default:a(()=>[l(t(G),{value:t(e).topBottom,"onUpdate:value":c[5]||(c[5]=g=>t(e).topBottom=g),range:"",placement:"bottom",min:0,max:t(e).height,marks:w.value,step:1},null,8,["value","max","marks"])]),_:1})):j("v-if",!0),l(t(z),{justify:"center"},{default:a(()=>[l(t(B),{type:"primary",onClick:L},{default:a(()=>[Ze]),_:1})]),_:1})]),_:1})]),_:1})]),_("div",et,[l(t(M),{style:{height:"100%"}},{header:a(()=>[tt]),default:a(()=>[_("div",lt,[_("div",at,[_("img",{ref_key:"HbImage",ref:r,class:"hb-factory-image-preview"},null,512),t(e).isReady?(p(),H("div",it,"\u5BBD\u5EA6\uFF1A"+D(t(e).width)+"px \u9AD8\u5EA6\uFF1A"+D(t(e).height)+"px",1)):j("v-if",!0)]),_("div",st,[_("img",{ref_key:"HbImagePreview",ref:h,class:"hb-factory-image-preview"},null,512),t(e).resultReady?(p(),H("div",ot,"\u5BBD\u5EA6\uFF1A"+D(t(e).resultDes[0])+"px * \u9AD8\u5EA6\uFF1A"+D(t(e).resultDes[1])+"px",1)):j("v-if",!0)])])]),_:1})])]))}};var ut=W(nt,[["__scopeId","data-v-f0df3eda"]]);const ht={props:{type:{type:String,default:"watermark"}},setup(d){const n=d;return(f,e)=>(p(),H(O,null,[n.type==="watermark"?(p(),C(Oe,{key:0})):j("v-if",!0),n.type==="cropper"?(p(),C(ut,{key:1})):j("v-if",!0)],64))}};export{ht as _};
