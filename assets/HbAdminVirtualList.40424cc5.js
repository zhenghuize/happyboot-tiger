import{_ as G}from"./index.24f102cb.js";import{b2 as J,r,w as K,o as O,aD as Q,f as o,g as f,h as _,ay as B,F as M,s as $,Z as x,ax as I}from"./vendor.9a5280d9.js";import{u as W}from"./index.acd7aaa1.js";const X={class:"virtual-list-temp-box"},ee={props:{data:{type:Array,require:!1,default:()=>[]},itemHeightMode:{type:String,require:!1,default:"fixed"},triggerMaskSpeed:{type:Number,require:!1,default:200},maxItemRender:{type:Number,require:!1,default:100},padSize:{type:Number,require:!1,default:10}},setup(D){const A=D,{data:S,itemHeightMode:b,triggerMaskSpeed:F,maxItemRender:N,padSize:k}=J(A),i=r([]),l=r([]),s=r([]),d=r([]),v=r([]),w=r(null),p=r(null),n=r(0);let m=-1;const h=r(0);let T=!1;function z(e){e&&d.value.push(e)}function g(e){return{offsetTop:0,itemHeight:0,rawData:e}}function E(e){return e&&e.clientHeight}function V(){return w.value.clientHeight}function y(){s.value.forEach((e,t)=>{const a=d.value[t],u=E(a);e.itemHeight=u,e.offsetTop=n.value,n.value+=u,l.value.push(e)}),s.value=[],d.value=[]}async function R(){n.value=0,m=-1,l.value=[],i.value=S.value;let e=0;for(let t=0;t<i.value.length;t++)if(b.value==="auto"&&(s.value.push(g(i.value[t])),t%N.value===0&&await I(y),t+1===i.value.length&&await I(y)),b.value==="fixed")if(t===0)s.value.push(g(i.value[t])),await I(y),e=l.value[0].itemHeight;else{const a=g(i.value[t]);a.offsetTop=n.value,a.itemHeight=e,n.value+=e,l.value.push(a)}}function C(e){for(let t=0;t<l.value.length;t++)if(l.value[t].offsetTop>=e)return t;return 0}function P(e,t){const a=V();for(let u=e;u<l.value.length;u++)if(l.value[u].offsetTop+l.value[u].itemHeight>=t+a)return u;return 0}function U(e,t){v.value=[];for(let a=e;a<t;a++)l.value[a]&&v.value.push(l.value[a])}function H(e){const t=e,a=C(t),u=P(a,t);l.value.length!==0&&m!==a&&(m=a,U(a-k.value,u+k.value))}function Y(){T=!0}let L=0;const c=r(!1),Z=W(()=>{!c.value&&h.value>F.value&&(c.value=!0),h.value===0&&(c.value=!1)},10);function q(){if(T)return;const e=p.value.scrollTop,t=e-L;L=e,h.value=Math.abs(t),Z(),requestAnimationFrame(()=>{q()})}function j(e){H(e.target.scrollTop)}return K(S,async()=>{await R(),H(p.value.scrollTop)},{deep:!0}),O(async()=>{q(),await R(),H(0)}),Q(Y),(e,t)=>(o(),f("div",{ref_key:"container",ref:w,class:"hb-admin-virtual-list-com"},[_("div",{ref_key:"listBox",ref:p,class:"virtual-list-placeholder",onScroll:j},[_("div",{class:"virtual-list-scroll-box",style:B(`height:${n.value}px`)},[(o(!0),f(M,null,$(v.value,(a,u)=>(o(),f("div",{key:u,class:"virtual-list-item",style:B(`transform: translate3d(0, ${a.offsetTop}px, 0);`)},[c.value?x(e.$slots,"loading",{key:0},void 0,!0):x(e.$slots,"default",{key:1,item:a.rawData},void 0,!0)],4))),128))],4)],544),_("div",X,[(o(!0),f(M,null,$(s.value,a=>(o(),f("div",{ref_for:!0,ref:z,class:"virtual-list-item"},[x(e.$slots,"default",{item:a.rawData},void 0,!0)]))),256))])],512))}};var ue=G(ee,[["__scopeId","data-v-76fa0874"]]);export{ue as H};
