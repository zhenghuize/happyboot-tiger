import{_ as O}from"./index.aaf46fa6.js";import{r as f,b2 as j,w as g,ax as R,o as q,f as x,g as I,h as s,F as G,s as J,_ as K,A as W,B as Q,C as U}from"./vendor.9a5280d9.js";const h=u=>(Q("data-v-eec934bc"),u=u(),U(),u),Z=["src"],ee=["onClick"],te=["src"],se=h(()=>s("i",{class:"ri-anticlockwise-line"},null,-1)),le=[se],ie=h(()=>s("i",{class:"ri-arrow-left-s-line"},null,-1)),ae=[ie],ne=h(()=>s("i",{class:"ri-aspect-ratio-line"},null,-1)),oe=[ne],re=h(()=>s("i",{class:"ri-arrow-right-s-line"},null,-1)),ce=[re],ue=h(()=>s("i",{class:"ri-clockwise-line"},null,-1)),ve=[ue],de=h(()=>s("i",{class:"ri-close-line"},null,-1)),fe=[de],he={props:{value:{type:Boolean,default:!1},isThumb:{type:Boolean,default:!1},list:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0},clickHide:{type:Boolean,default:!0}},emits:["update:value"],setup(u,{emit:D}){const i=u,o=f(!1),{value:E,initialIndex:M}=j(i);o.value=E.value;const a=f(0);a.value=M.value;let m=0,y=0,p={x:0,y:0},l={x:1,y:1},v=0,P=0,b=0;const d={x:0,y:0};let k=!1;g(()=>i.value,()=>{o.value=i.value,o.value&&R(()=>{$()})}),g(o,()=>{D("update:value",o.value)}),g(()=>i.initialIndex,()=>{a.value=i.initialIndex}),g(a,()=>{i.isThumb&&R(()=>{const e=B.value;e&&(e.scrollLeft=(a.value-1)*100)})});function w(e){const t=[parseInt(e.style.left+0),parseInt(e.style.top+0)];return{x:t[0],y:t[1]}}function _(e,t="fit"){const n=new Image;n.src=i.list[a.value],n.complete?T(n,e,t):n.onload=()=>{T(n,e,t)}}function T(e,t,n){const c=e.naturalWidth,H=e.naturalHeight,z=c/H;n==="fit"?(m=Math.ceil(b*z/2),y=Math.ceil(b/2)):n==="original"&&(m=c,y=H),t.style.width=m+"px",t.style.height=y+"px",t.style.left=Math.ceil((P-m)/2)+"px",t.style.top=Math.ceil((b-y)/2)+"px",l={x:1,y:1},v=0,t.style.transform="scale(1) rotate(0deg)"}function $(){if(i.list.length>0){const e=r.value;if(e){if(P=e.parentNode.offsetWidth,b=e.parentNode.offsetHeight,_(e),i.isThumb){const t=L.value;t.style.width=i.list.length*100+"px"}e.addEventListener("mousedown",t=>{t.preventDefault(),p=w(e),d.x=t.clientX,d.y=t.clientY,k=!0}),e.addEventListener("mousemove",t=>{if(t.preventDefault(),k){document.body.style.cursor="move";const n=p.x+t.clientX-d.x,c=p.y+t.clientY-d.y;e.style.transition="none",e.style.left=n+"px",e.style.top=c+"px",d.x=t.clientX,d.y=t.clientY,p=w(e)}}),e.addEventListener("mouseup",t=>{t.preventDefault(),document.body.style.cursor="default",k=!1,e.style.transition="all .3s"}),C.value.addEventListener("wheel",t=>{(t.wheelDelta>0||t.detail>0)&&l.x<1.9&&(l.x+=.1,l.y+=.1),(t.wheelDelta<0||t.detail<0)&&l.x>.4&&(l.x-=.1,l.y-=.1),e.style.transform=`scale(${l.x},${l.y}) rotate(${v}deg)`,p=w(e)})}}else o.value=!1}function N(e){const t=r.value;t.style.transition="none",a.value=e,l={x:1,y:1},v=0,r.value.style.transform="scale(1) rotate(0deg)",setTimeout(()=>{t.style.transition="all .3s"},30)}function S(){a.value>0?a.value--:a.value=i.list.length-1;const e=r.value;e.style.transition="none",_(e),setTimeout(()=>{e.style.transition="all .3s"},30)}function A(){a.value<i.list.length-1?a.value++:a.value=0;const e=r.value;e.style.transition="none",_(e),setTimeout(()=>{e.style.transition="all .3s"},30)}function X(){const e=r.value;_(e,"original"),e.style.transform=`scale(${l.x},${l.y}) rotate(${v}deg)`}function Y(){const e=r.value;e.style.transform=`scale(${l.x},${l.y}) rotate(${v-=90}deg)`}function F(){const e=r.value;e.style.transform=`scale(${l.x},${l.y}) rotate(${v+=90}deg)`}function V(){i.clickHide&&(o.value=!1)}q(()=>{$()});const C=f(),r=f(),B=f(),L=f();return(e,t)=>o.value?(x(),I("div",{key:0,ref_key:"HbPrevWrap",ref:C,class:"hb-prev-wrap"},[s("div",{class:"hb-prev-mask",onClick:V}),s("img",{ref_key:"HbPrevImg",ref:r,class:"hb-prev-img",alt:"\u9884\u89C8\u56FE",src:u.list[a.value]},null,8,Z),i.isThumb?(x(),I("div",{key:0,ref_key:"HbPrevThumbBox",ref:B,class:"hb-prev-thumb-box"},[s("div",{ref_key:"HbPrevThumb",ref:L,class:"hb-prev-thumb-list"},[(x(!0),I(G,null,J(i.list,(n,c)=>(x(),I("div",{key:c,class:K(["hb-prev-thumb-item",a.value===c?"hb-prev-thumb-item-active":""]),onClick:H=>N(c)},[s("img",{class:"hb-prev-thumb-img",src:n},null,8,te)],10,ee))),128))],512)],512)):W("v-if",!0),s("div",{class:"hb-prev-bar"},[s("div",{class:"hb-prev-btn",title:"\u5411\u5DE6\u65CB\u8F6C",onClick:Y},le),s("div",{class:"hb-prev-btn",title:"\u524D\u4E00\u5F20",onClick:S},ae),s("div",{class:"hb-prev-btn",title:"\u56FE\u7247\u539F\u59CB\u5927\u5C0F",onClick:X},oe),s("div",{class:"hb-prev-btn",title:"\u540E\u4E00\u5F20",onClick:A},ce),s("div",{class:"hb-prev-btn",title:"\u5411\u53F3\u65CB\u8F6C",onClick:F},ve)]),s("div",{class:"hb-prev-close",onClick:t[0]||(t[0]=n=>o.value=!1)},fe)],512)):W("v-if",!0)}};var ye=O(he,[["__scopeId","data-v-eec934bc"]]);export{ye as H};
