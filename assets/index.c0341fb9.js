import{_ as G}from"./index.24f102cb.js";import{e as W,a6 as Y,r as L,f,g as H,h as _,i as l,k as a,l as t,ah as q,ai as x,am as T,m as z,an as R,v as U,ab as C,N as B,b3 as F,F as O,Y as A,A as j,b4 as k,z as M,x as i,B as J,C as K,$ as V,t as D}from"./vendor.9a5280d9.js";import{C as E}from"./CloudUploadOutline.72976b77.js";function Z(d,n,p,e=0,c=0,m="",r="",S="",b=""){if(!n||!p)d({success:!1,data:"\u5E95\u56FE\u6216\u6C34\u5370\u4E0D\u80FD\u4E3A\u7A7A\uFF01"});else{const v={w:0,h:0},y={w:0,h:0};v.w=m||n.width,v.h=r||n.height,y.w=S||p.width,y.h=b||p.height;const w=document.createElement("canvas");w.width=v.w,w.height=v.h;const $=w.getContext("2d");$.drawImage(n,0,0,v.w,v.h),$.drawImage(p,e,c,y.w,y.h),d({success:!0,data:w.toDataURL("image/png",1)})}}function ee(d,n,p=0,e=0,c=0,m=0,r=0,S=0){if(!n)d({success:!1,data:"\u5E95\u56FE\u4E0D\u80FD\u4E3A\u7A7A\uFF01"});else{const b={w:0,h:0};b.w=r||n.width,b.h=S||n.height;const v={w:0,h:0};if(p+e>=b.w){d({success:!1,data:"\u5DE6\u53F3\u8DDD\u79BB\u53C2\u6570\u9519\u8BEF\uFF01"});return}else if(c+m>=b.h){d({success:!1,data:"\u9876\u5E95\u8DDD\u79BB\u53C2\u6570\u9519\u8BEF\uFF01"});return}else v.w=b.w-p-e,v.h=b.h-c-m;const y=document.createElement("canvas");y.width=b.w,y.height=b.h;const w=y.getContext("2d");w.drawImage(n,0,0,b.w,b.h);const $=w.getImageData(p,c,v.w,v.h);y.width=v.w,y.height=v.h,w.putImageData($,0,0),d({success:!0,data:y.toDataURL("image/png",1)})}}function te(d,n,p=0,e=0){if(!n)d({success:!1,data:"\u5E95\u56FE\u4E0D\u80FD\u4E3A\u7A7A\uFF01"});else{const c={w:0,h:0};c.w=p||n.width,c.h=e||n.height;const m=document.createElement("canvas");m.width=c.w,m.height=c.h,m.getContext("2d").drawImage(n,0,0,c.w,c.h),d({success:!0,data:m.toDataURL("image/png",1)})}}const P=d=>(J("data-v-6b7ba9da"),d=d(),K(),d),le={class:"hb-image-factory-wrap"},ae={class:"hb-image-factory-config"},ie=i(" \u6C34\u5370\u6DFB\u52A0 "),se=i("\u4E0A\u4F20"),oe=i("\u94FE\u63A5"),ne=i("\u786E\u5B9A"),ue=i(" \u4E0A\u4F20\u56FE\u7247 "),de=i("\u5BBD\u5EA6"),re=i("px"),ge=P(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),ce=i("\u9AD8\u5EA6"),he=i("px"),pe=i("\u4E0A\u4F20"),fe=i("\u94FE\u63A5"),_e=i("\u786E\u5B9A"),me=i(" \u4E0A\u4F20\u56FE\u7247 "),ve=i("\u5BBD\u5EA6"),ye=i("px"),we=P(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),be=i("\u9AD8\u5EA6"),ke=i("px"),xe=i("\u5DE6\u4E0A\u89D2"),Ie=i("\u5DE6\u4E0B\u89D2"),Re=i("\u53F3\u4E0A\u89D2"),je=i("\u53F3\u4E0B\u89D2"),Ce=i("\u5C45\u4E2D"),Ue=i("\u81EA\u5B9A\u4E49"),Le=i("\u8DDD\u5DE6"),$e=i("px"),Be=P(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),He=i("\u8DDD\u9876"),Se=i("px"),Ne=i("\u56FE\u7247\u751F\u6210"),Fe={class:"hb-image-factory-preview"},ze=i(" \u751F\u6210\u7ED3\u679C "),De={setup(d){const n=W(),p="image/jpg,image/jpeg,image/png",e=Y({image:{type:"upload",url:"",file:null,object:null,width:0,height:0},sign:{type:"upload",url:"",file:null,object:null,width:0,height:0,position:"leftTop",top:0,left:0}}),c=L(null),m=L(),r=L();function S(){setTimeout(()=>{m.value.click()},400)}function b(u){const o=u.target.files[0];if(!p.toLocaleLowerCase().includes(o.type.toLocaleLowerCase())){n.error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u652F\u6301");return}e.image.file=URL.createObjectURL(o),r.value.style.display="block",r.value.src=e.image.file;let s=new Image;s.src=e.image.file,s.onload=()=>{e.image.width=s.width,e.image.height=s.height},e.image.object=s,m.value.value=""}function v(){r.value.style.display="block",r.value.src=e.image.url;let u=new Image;u.src=e.image.url,u.crossOrigin="Anonymous",u.onload=()=>{e.image.width=u.width,e.image.height=u.height,e.image.object=u}}const y=L(),w=L();function $(){setTimeout(()=>{y.value.click()},400)}function I(u){const o=u.target.files[0];if(!p.toLocaleLowerCase().includes(o.type.toLocaleLowerCase())){n.error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u652F\u6301");return}e.sign.file=URL.createObjectURL(o),w.value.style.display="block",w.value.src=e.sign.file;let s=new Image;s.src=e.sign.file,s.onload=()=>{e.sign.width=s.width,e.sign.height=s.height},e.sign.object=s,y.value.value=""}function h(){w.value.style.display="block",w.value.src=e.sign.url;let u=new Image;u.src=e.sign.url,u.crossOrigin="Anonymous",u.onload=()=>{e.sign.width=u.width,e.sign.height=u.height,e.sign.object=u}}function g(){if(r.value.src===""){n.error("\u8BF7\u5148\u4E0A\u4F20\u6216\u6DFB\u52A0\u4E00\u4E2A\u5E95\u56FE\u56FE\u7247\uFF01");return}if(w.value.src===""){n.error("\u8BF7\u5148\u4E0A\u4F20\u6216\u6DFB\u52A0\u4E00\u4E2A\u6C34\u5370\u56FE\u7247\uFF01");return}e.sign.position==="leftTop"?(e.sign.left=0,e.sign.top=0):e.sign.position==="leftBottom"?(e.sign.left=0,e.sign.top=e.image.height-e.sign.height):e.sign.position==="rightTop"?(e.sign.left=e.image.width-e.sign.width,e.sign.top=0):e.sign.position==="rightBottom"?(e.sign.left=e.image.width-e.sign.width,e.sign.top=e.image.height-e.sign.height):e.sign.position==="center"&&(e.sign.left=(e.image.width-e.sign.width)/2,e.sign.top=(e.image.height-e.sign.height)/2),Z(u=>{u.success?c.value.src=u.data:(c.value.src="",n.error(u.data))},e.image.object,e.sign.object,e.sign.left,e.sign.top,e.image.width,e.image.height,e.sign.width,e.sign.height)}return(u,o)=>(f(),H("div",le,[_("div",ae,[l(t(M),{style:{height:"100%",overflow:"auto"}},{header:a(()=>[ie]),default:a(()=>[l(t(q),null,{default:a(()=>[l(t(x),{label:"\u5E95\u56FE\u56FE\u7247"},{default:a(()=>[l(t(T),{value:t(e).image.type,"onUpdate:value":o[0]||(o[0]=s=>t(e).image.type=s)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"upload"},{default:a(()=>[se]),_:1}),l(t(R),{value:"link"},{default:a(()=>[oe]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l(t(x),{label:"\u5E95\u56FE\u9884\u89C8"},{default:a(()=>[_("img",{ref_key:"HbImage",ref:r,class:"hb-preview-img"},null,512)]),_:1}),l(t(x),{label:""},{default:a(()=>[t(e).image.type==="link"?(f(),U(t(F),{key:0},{default:a(()=>[l(t(C),{value:t(e).image.url,"onUpdate:value":o[1]||(o[1]=s=>t(e).image.url=s)},null,8,["value"]),l(t(B),{type:"primary",onClick:v},{default:a(()=>[ne]),_:1})]),_:1})):(f(),H(O,{key:1},[_("input",{ref_key:"HbImageFile",ref:m,type:"file",style:{display:"none"},accept:p,onChange:b},null,544),t(e).image.type==="upload"?(f(),U(t(B),{key:0,type:"primary",onClick:S},{default:a(()=>[l(t(A),{component:t(E),size:"22"},null,8,["component"]),ue]),_:1})):j("v-if",!0)],64))]),_:1}),l(t(x),{label:"\u5E95\u56FE\u56FE\u7247\u5BBD\u9AD8"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[de]),_:1}),l(t(C),{value:t(e).image.width,"onUpdate:value":o[2]||(o[2]=s=>t(e).image.width=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[re]),_:1}),ge,l(t(k),null,{default:a(()=>[ce]),_:1}),l(t(C),{value:t(e).image.height,"onUpdate:value":o[3]||(o[3]=s=>t(e).image.height=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[he]),_:1})]),_:1})]),_:1}),l(t(x),{label:"\u6C34\u5370\u56FE\u7247"},{default:a(()=>[l(t(T),{value:t(e).sign.type,"onUpdate:value":o[4]||(o[4]=s=>t(e).sign.type=s)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"upload"},{default:a(()=>[pe]),_:1}),l(t(R),{value:"link"},{default:a(()=>[fe]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l(t(x),{label:"\u6C34\u5370\u9884\u89C8"},{default:a(()=>[_("img",{ref_key:"HbSign",ref:w,class:"hb-preview-img"},null,512)]),_:1}),l(t(x),{label:""},{default:a(()=>[t(e).sign.type==="link"?(f(),U(t(F),{key:0},{default:a(()=>[l(t(C),{value:t(e).sign.url,"onUpdate:value":o[5]||(o[5]=s=>t(e).sign.url=s)},null,8,["value"]),l(t(B),{type:"primary",onClick:h},{default:a(()=>[_e]),_:1})]),_:1})):j("v-if",!0),t(e).sign.type==="upload"?(f(),H(O,{key:1},[_("input",{ref_key:"HbSignFile",ref:y,type:"file",style:{display:"none"},accept:p,onChange:I},null,544),t(e).sign.type==="upload"?(f(),U(t(B),{key:0,type:"primary",onClick:$},{default:a(()=>[l(t(A),{component:t(E),size:"22"},null,8,["component"]),me]),_:1})):j("v-if",!0)],64)):j("v-if",!0)]),_:1}),l(t(x),{label:"\u6C34\u5370\u56FE\u7247\u5BBD\u9AD8"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[ve]),_:1}),l(t(C),{value:t(e).sign.width,"onUpdate:value":o[6]||(o[6]=s=>t(e).sign.width=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[ye]),_:1}),we,l(t(k),null,{default:a(()=>[be]),_:1}),l(t(C),{value:t(e).sign.height,"onUpdate:value":o[7]||(o[7]=s=>t(e).sign.height=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[ke]),_:1})]),_:1})]),_:1}),l(t(x),{label:"\u6C34\u5370\u4F4D\u7F6E"},{default:a(()=>[l(t(T),{value:t(e).sign.position,"onUpdate:value":o[8]||(o[8]=s=>t(e).sign.position=s)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"leftTop"},{default:a(()=>[xe]),_:1}),l(t(R),{value:"leftBottom"},{default:a(()=>[Ie]),_:1}),l(t(R),{value:"rightTop"},{default:a(()=>[Re]),_:1}),l(t(R),{value:"rightBottom"},{default:a(()=>[je]),_:1}),l(t(R),{value:"center"},{default:a(()=>[Ce]),_:1}),l(t(R),{value:"free"},{default:a(()=>[Ue]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(e).sign.position==="free"?(f(),U(t(x),{key:0,label:"\u6C34\u5370\u4F4D\u7F6E\u53C2\u6570"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[Le]),_:1}),l(t(C),{value:t(e).sign.left,"onUpdate:value":o[9]||(o[9]=s=>t(e).sign.left=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[$e]),_:1}),Be,l(t(k),null,{default:a(()=>[He]),_:1}),l(t(C),{value:t(e).sign.top,"onUpdate:value":o[10]||(o[10]=s=>t(e).sign.top=s)},null,8,["value"]),l(t(k),null,{default:a(()=>[Se]),_:1})]),_:1})]),_:1})):j("v-if",!0),l(t(z),{justify:"center"},{default:a(()=>[l(t(B),{type:"primary",onClick:g},{default:a(()=>[Ne]),_:1})]),_:1})]),_:1})]),_:1})]),_("div",Fe,[l(t(M),{style:{height:"100%"}},{header:a(()=>[ze]),default:a(()=>[_("img",{ref_key:"HbImagePreview",ref:c,class:"hb-factory-image-preview"},null,512)]),_:1})])]))}};var Te=G(De,[["__scopeId","data-v-6b7ba9da"]]);const Oe=d=>(J("data-v-24d4ee88"),d=d(),K(),d),Me={class:"hb-image-factory-wrap"},Ae={class:"hb-image-factory-config"},Ee=i(" \u56FE\u7247\u88C1\u526A "),Pe=i("\u4E0A\u4F20"),Ve=i("\u94FE\u63A5"),Ge=i("\u786E\u5B9A"),We=i(" \u4E0A\u4F20\u56FE\u7247 "),Ye=i("\u5BBD\u5EA6"),qe=i("px"),Je=Oe(()=>_("div",{style:{display:"flex","align-items":"center",padding:"0 10px"}},"-",-1)),Ke=i("\u9AD8\u5EA6"),Qe=i("px"),Xe=i("\u56FE\u7247\u751F\u6210"),Ze={class:"hb-image-factory-preview"},et=i(" \u5E95\u56FE\u9884\u89C8 | \u8F93\u51FA\u7ED3\u679C "),tt={class:"hb-factory-image-contrast-preview"},lt={class:"hb-factory-image-preview-content"},at={key:0},it={class:"hb-factory-image-preview-content"},st={key:0},ot={setup(d){const n=W(),p="image/jpg,image/jpeg,image/png",e=Y({type:"upload",url:"",file:null,object:null,width:0,height:0,leftRight:[0,0],topBottom:[0,0],isReady:!1,resultReady:!1,resultDes:[0,0]}),c=L(null),m=L(),r=L();function S(){setTimeout(()=>{m.value.click()},400)}function b(I){const h=I.target.files[0];if(!p.toLocaleLowerCase().includes(h.type.toLocaleLowerCase())){n.error("\u6587\u4EF6\u7C7B\u578B\u4E0D\u652F\u6301");return}e.file=URL.createObjectURL(h),r.value.style.display="block",r.value.src=e.file;let g=new Image;g.src=e.file,g.onload=()=>{e.width=g.width,e.height=g.height},e.object=g,e.isReady=!0,m.value.value=""}function v(){r.value.style.display="block",r.value.src=e.url;let I=new Image;I.src=e.image.url,I.crossOrigin="Anonymous",I.onload=()=>{e.width=I.width,e.height=I.height,e.object=I,e.isReady=!0}}const y=L({}),w=L({});function $(){if(r.value.src===""){n.error("\u8BF7\u5148\u4E0A\u4F20\u6216\u6DFB\u52A0\u4E00\u4E2A\u5E95\u56FE\u56FE\u7247\uFF01");return}r.value.style.width=e.width+"px",r.value.style.height=e.height+"px",te(N=>{N.success?r.value.src=N.data:n.error(N.data)},e.object,e.width,e.height);let I=e.leftRight[0]<e.leftRight[1]?e.leftRight[0]:e.leftRight[1],h=e.leftRight[0]<e.leftRight[1]?e.leftRight[1]:e.leftRight[0];const g=I,u=e.width-h;let o=e.topBottom[0]<e.topBottom[1]?e.topBottom[0]:e.topBottom[1],s=e.topBottom[0]<e.topBottom[1]?e.topBottom[1]:e.topBottom[0];const Q=o,X=e.height-s;ee(N=>{N.success?(c.value.src=N.data,e.resultReady=!0,e.resultDes=[h-I,s-o]):(e.resultReady=!1,c.value.src="",n.error(N.data))},e.object,g,u,Q,X,e.width,e.height)}return(I,h)=>(f(),H("div",Me,[_("div",Ae,[l(t(M),{style:{height:"100%",overflow:"auto"}},{header:a(()=>[Ee]),default:a(()=>[l(t(q),null,{default:a(()=>[l(t(x),{label:"\u5E95\u56FE\u56FE\u7247"},{default:a(()=>[l(t(T),{value:t(e).type,"onUpdate:value":h[0]||(h[0]=g=>t(e).type=g)},{default:a(()=>[l(t(z),null,{default:a(()=>[l(t(R),{value:"upload"},{default:a(()=>[Pe]),_:1}),l(t(R),{value:"link"},{default:a(()=>[Ve]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),l(t(x),{label:""},{default:a(()=>[t(e).type==="link"?(f(),U(t(F),{key:0},{default:a(()=>[l(t(C),{value:t(e).url,"onUpdate:value":h[1]||(h[1]=g=>t(e).url=g)},null,8,["value"]),l(t(B),{type:"primary",onClick:v},{default:a(()=>[Ge]),_:1})]),_:1})):(f(),H(O,{key:1},[_("input",{ref_key:"HbImageFile",ref:m,type:"file",style:{display:"none"},accept:p,onChange:b},null,544),t(e).type==="upload"?(f(),U(t(B),{key:0,type:"primary",onClick:S},{default:a(()=>[l(t(A),{component:t(E),size:"22"},null,8,["component"]),We]),_:1})):j("v-if",!0)],64))]),_:1}),l(t(x),{label:"\u5E95\u56FE\u56FE\u7247\u5BBD\u9AD8"},{default:a(()=>[l(t(F),null,{default:a(()=>[l(t(k),null,{default:a(()=>[Ye]),_:1}),l(t(C),{value:t(e).width,"onUpdate:value":h[2]||(h[2]=g=>t(e).width=g)},null,8,["value"]),l(t(k),null,{default:a(()=>[qe]),_:1}),Je,l(t(k),null,{default:a(()=>[Ke]),_:1}),l(t(C),{value:t(e).height,"onUpdate:value":h[3]||(h[3]=g=>t(e).height=g)},null,8,["value"]),l(t(k),null,{default:a(()=>[Qe]),_:1})]),_:1})]),_:1}),t(e).width>0?(f(),U(t(x),{key:0,label:"\u5DE6\u53F3\u88C1\u526A\u8DDD\u79BB"},{default:a(()=>[l(t(V),{value:t(e).leftRight,"onUpdate:value":h[4]||(h[4]=g=>t(e).leftRight=g),range:"",placement:"bottom",min:0,max:t(e).width,marks:y.value,step:1},null,8,["value","max","marks"])]),_:1})):j("v-if",!0),t(e).height>0?(f(),U(t(x),{key:1,label:"\u9876\u5E95\u88C1\u526A\u8DDD\u79BB"},{default:a(()=>[l(t(V),{value:t(e).topBottom,"onUpdate:value":h[5]||(h[5]=g=>t(e).topBottom=g),range:"",placement:"bottom",min:0,max:t(e).height,marks:w.value,step:1},null,8,["value","max","marks"])]),_:1})):j("v-if",!0),l(t(z),{justify:"center"},{default:a(()=>[l(t(B),{type:"primary",onClick:$},{default:a(()=>[Xe]),_:1})]),_:1})]),_:1})]),_:1})]),_("div",Ze,[l(t(M),{style:{height:"100%"}},{header:a(()=>[et]),default:a(()=>[_("div",tt,[_("div",lt,[_("img",{ref_key:"HbImage",ref:r,class:"hb-factory-image-preview"},null,512),t(e).isReady?(f(),H("div",at,"\u5BBD\u5EA6\uFF1A"+D(t(e).width)+"px \u9AD8\u5EA6\uFF1A"+D(t(e).height)+"px",1)):j("v-if",!0)]),_("div",it,[_("img",{ref_key:"HbImagePreview",ref:c,class:"hb-factory-image-preview"},null,512),t(e).resultReady?(f(),H("div",st,"\u5BBD\u5EA6\uFF1A"+D(t(e).resultDes[0])+"px * \u9AD8\u5EA6\uFF1A"+D(t(e).resultDes[1])+"px",1)):j("v-if",!0)])])]),_:1})])]))}};var nt=G(ot,[["__scopeId","data-v-24d4ee88"]]);const gt={props:{type:{type:String,default:"watermark"}},setup(d){const n=d;return(p,e)=>(f(),H(O,null,[n.type==="watermark"?(f(),U(Te,{key:0})):j("v-if",!0),n.type==="cropper"?(f(),U(nt,{key:1})):j("v-if",!0)],64))}};export{gt as _};
