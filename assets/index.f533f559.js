import{H as P}from"./HbAdminPageLayout.645ba311.js";import{b as Q}from"./browser.c0d87af6.js";import{_ as j}from"./index.d03b31d1.js";import{r as N,w as D,o as O,f as A,g as V,h as p,a1 as $,v as Y,k as a,i as o,l as t,Y as E,m as w,n as G,z as q,aW as J,aV as U,ac as z,ad as i,a6 as B,ah as H,ai as v,aZ as C,am as d,a_ as W,N as X,$ as Z,x as g}from"./vendor.366f140f.js";const K={class:"hb-admin-qrcode-com"},tt=["src"],et={props:{text:{required:!0,type:String,default:()=>""},options:{required:!1,type:Object,default:()=>({errorCorrectionLevel:"M",margin:1,quality:1,width:360,color:{dark:"#8DD268FF",light:"#FFFFFFFF"},type:"image/png",logoSize:80,logoBorderSize:2,logoUrl:"/src/assets/logo.png",logoBgColor:"#FFFFFFFF",bottomText:"HappyBoot Tiger",bottomFontSize:30,bottomTextColor:"#8DD268FF",bottomTextTopMargin:10,bottomTextBottomMargin:10})}},setup(M){const l=M,s=N("");async function m(r,c,y){const e=JSON.parse(JSON.stringify(c));e.width=e.width*window.devicePixelRatio;const n=await Q.toDataURL(r,e),_=new Image;_.onload=S,_.src=n;function S(){const x=e.width,k=x+e.bottomFontSize+e.bottomTextTopMargin,b=e.margin,F=document.createElement("canvas");if(!F.getContext)return;F.width=x,F.height=k;const u=F.getContext("2d");u.fillStyle=e.color.light,u.fillRect(0,0,x,k);const f=x-b*2;u.drawImage(_,b,b,f,f),u.fillStyle=e.bottomTextColor,u.font=e.bottomFontSize+"px Arial",u.textAlign="center",u.fillText(e.bottomText,x/2,f+e.bottomFontSize+e.bottomTextTopMargin-e.bottomTextBottomMargin,f);const h=b+f/2,I=h;u.arc(h,I,e.logoSize/2+e.logoBorderSize,0,Math.PI*2,!1),u.fillStyle=e.logoBgColor,u.fill();const L=(f-e.logoSize)/2+b,R=L,T=new Image;T.setAttribute("crossOrigin","anonymous"),T.onload=()=>{u.beginPath(),u.arc(h,I,e.logoSize/2,0,Math.PI*2,!1),u.fill(),u.clip(),u.drawImage(T,L,R,e.logoSize,e.logoSize),y(F.toDataURL(e.type))},T.src=e.logoUrl}}return D(l.options,()=>{m(l.text,l.options,r=>{s.value=r})}),D(()=>l.text,()=>{m(l.text,l.options,r=>{s.value=r})}),O(()=>{m(l.text,l.options,r=>{s.value=r})}),(r,c)=>(A(),V("div",K,[p("img",{style:{zoom:"0.5"},src:s.value},null,8,tt)]))}};var ot=j(et,[["__scopeId","data-v-f5ffbd14"]]);const lt=p("h2",null,"\u4E8C\u7EF4\u7801\u751F\u6210",-1),at=g(" \u57FA\u4E8Eqrcode\u5E93\u5B9E\u73B0 "),nt={style:{display:"flex",overflow:"auto"}},it={style:{"margin-bottom":"10px","margin-right":"10px",width:"400px",height:"600px",overflow:"auto"}},ut=g("image/jpeg"),rt=g("image/png"),st=g("L"),dt=g("M"),gt=g("Q"),pt=g("H"),mt=g(" \u4E0A\u4F20 "),ft={style:{flex:"1",height:"600px"}},vt={style:{display:"flex","justify-content":"center","align-items":"center",height:"100%"}},ct={setup(M){const l=$({errorCorrectionLevel:"M",margin:1,quality:1,width:360,color:{dark:"#8DD268FF",light:"#FFFFFFFF"},type:"image/png",logoSize:80,logoBorderSize:2,logoUrl:"https://happykit.org/h_logo.png",logoBgColor:"#FFFFFFFF",bottomText:"HappyBoot Tiger",bottomFontSize:30,bottomTextColor:"#8DD268FF",bottomTextTopMargin:10,bottomTextBottomMargin:10}),s=N("HappyBoot Tiger"),m=N(null);function r(){setTimeout(()=>{m.value.click()},400)}function c(y){const e=y.target.files[0];let n=new FileReader;n.onload=function(_){let S=_.target.result;l.logoUrl=S},n.readAsDataURL(e)}return(y,e)=>(A(),Y(P,null,{default:a(()=>[o(t(Z),{style:{padding:"20px"}},{default:a(()=>[o(t(E),null,{default:a(()=>[o(t(w),{vertical:""},{default:a(()=>[lt,o(t(G),{type:"info"},{default:a(()=>[at]),_:1}),p("div",nt,[p("div",it,[o(t(q),{title:"\u4E8C\u7EF4\u7801\u914D\u7F6E"},{default:a(()=>[o(t(J),{"default-expanded-names":["1","2","3"]},{default:a(()=>[o(t(U),{title:"\u57FA\u672C\u8BBE\u7F6E",name:"1"},{default:a(()=>[o(t(z),null,{default:a(()=>[o(t(i),{label:"\u6587\u672C\u5185\u5BB9"},{default:a(()=>[o(t(B),{value:s.value,"onUpdate:value":e[0]||(e[0]=n=>s.value=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u56FE\u50CF\u7C7B\u578B"},{default:a(()=>[o(t(H),{value:t(l).type,"onUpdate:value":e[1]||(e[1]=n=>t(l).type=n)},{default:a(()=>[o(t(w),null,{default:a(()=>[o(t(v),{value:"image/jpeg"},{default:a(()=>[ut]),_:1}),o(t(v),{value:"image/png"},{default:a(()=>[rt]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),o(t(i),{label:"\u524D\u666F\u8272"},{default:a(()=>[o(t(C),{value:t(l).color.dark,"onUpdate:value":e[2]||(e[2]=n=>t(l).color.dark=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u80CC\u666F\u8272"},{default:a(()=>[o(t(C),{value:t(l).color.light,"onUpdate:value":e[3]||(e[3]=n=>t(l).color.light=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u5BB9\u9519\u7B49\u7EA7"},{default:a(()=>[o(t(H),{value:t(l).errorCorrectionLevel,"onUpdate:value":e[4]||(e[4]=n=>t(l).errorCorrectionLevel=n)},{default:a(()=>[o(t(w),null,{default:a(()=>[o(t(v),{value:"L"},{default:a(()=>[st]),_:1}),o(t(v),{value:"M"},{default:a(()=>[dt]),_:1}),o(t(v),{value:"Q"},{default:a(()=>[gt]),_:1}),o(t(v),{value:"H"},{default:a(()=>[pt]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),o(t(i),{label:"\u5BBD\u5EA6"},{default:a(()=>[o(t(d),{min:0,max:500,step:1,value:t(l).width,"onUpdate:value":e[5]||(e[5]=n=>t(l).width=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u8D28\u91CF"},{default:a(()=>[o(t(d),{min:.1,max:1,step:.01,value:t(l).quality,"onUpdate:value":e[6]||(e[6]=n=>t(l).quality=n)},null,8,["min","step","value"])]),_:1}),o(t(i),{label:"\u8FB9\u8DDD"},{default:a(()=>[o(t(d),{min:0,max:100,step:1,value:t(l).margin,"onUpdate:value":e[7]||(e[7]=n=>t(l).margin=n)},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(t(U),{title:"Logo\u8BBE\u7F6E",name:"2"},{default:a(()=>[o(t(z),null,{default:a(()=>[o(t(i),{label:"logo\uFF08\u8BF7\u9009\u62E9\u5C3A\u5BF8\u5C0F\u4E00\u4E9B\u7684\u56FE\u7247\uFF09"},{default:a(()=>[o(t(W),{style:{width:"100%"}},{default:a(()=>[o(t(B),{value:t(l).logoUrl,"onUpdate:value":e[8]||(e[8]=n=>t(l).logoUrl=n)},null,8,["value"]),p("input",{type:"file",style:{display:"none"},ref_key:"fileInput",ref:m,onChange:c},null,544),o(t(X),{type:"primary",ghost:"",onClick:r},{default:a(()=>[mt]),_:1})]),_:1})]),_:1}),o(t(i),{label:"logo\u8FB9\u8DDD"},{default:a(()=>[o(t(d),{min:0,max:100,step:1,value:t(l).logoBorderSize,"onUpdate:value":e[9]||(e[9]=n=>t(l).logoBorderSize=n)},null,8,["value"])]),_:1}),o(t(i),{label:"logo\u80CC\u666F\u8272"},{default:a(()=>[o(t(C),{value:t(l).logoBgColor,"onUpdate:value":e[10]||(e[10]=n=>t(l).logoBgColor=n)},null,8,["value"])]),_:1}),o(t(i),{label:"logo\u5BBD\u5EA6"},{default:a(()=>[o(t(d),{min:0,max:200,step:1,value:t(l).logoSize,"onUpdate:value":e[11]||(e[11]=n=>t(l).logoSize=n)},null,8,["value"])]),_:1})]),_:1})]),_:1}),o(t(U),{title:"\u5E95\u90E8\u6587\u6848\u8BBE\u7F6E",name:"3"},{default:a(()=>[o(t(z),null,{default:a(()=>[o(t(i),{label:"\u5E95\u90E8\u6587\u6848"},{default:a(()=>[o(t(B),{value:t(l).bottomText,"onUpdate:value":e[12]||(e[12]=n=>t(l).bottomText=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u5E95\u90E8\u6587\u6848\u5B57\u4F53\u5927\u5C0F"},{default:a(()=>[o(t(d),{min:0,max:50,step:1,value:t(l).bottomFontSize,"onUpdate:value":e[13]||(e[13]=n=>t(l).bottomFontSize=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u5E95\u90E8\u6587\u6848\u5B57\u4F53\u989C\u8272"},{default:a(()=>[o(t(C),{value:t(l).bottomTextColor,"onUpdate:value":e[14]||(e[14]=n=>t(l).bottomTextColor=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u5E95\u90E8\u6587\u6848\u8DDD\u79BB\u4E8C\u7EF4\u7801\u8DDD\u79BB"},{default:a(()=>[o(t(d),{min:0,max:100,step:1,value:t(l).bottomTextTopMargin,"onUpdate:value":e[15]||(e[15]=n=>t(l).bottomTextTopMargin=n)},null,8,["value"])]),_:1}),o(t(i),{label:"\u5E95\u90E8\u6587\u6848\u8DDD\u79BB\u4E8C\u7EF4\u7801\u8DDD\u79BB"},{default:a(()=>[o(t(d),{min:0,max:100,step:1,value:t(l).bottomTextBottomMargin,"onUpdate:value":e[16]||(e[16]=n=>t(l).bottomTextBottomMargin=n)},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),p("div",ft,[o(t(q),{title:"\u751F\u6210\u7ED3\u679C",style:{height:"100%"}},{default:a(()=>[p("div",vt,[o(t(ot),{text:s.value,options:t(l)},null,8,["text","options"])])]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ct as default};
